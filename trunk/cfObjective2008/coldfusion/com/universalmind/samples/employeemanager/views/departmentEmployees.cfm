<html>
	<head>
		<title>employee app</title>
		<script src="lib/SpryData.js" type="text/javascript"></script>
		<script src="lib/SpryJSONDataSet.js" type="text/javascript"></script>
		<script type="text/javascript">
			var departments = new Spry.Data.JSONDataSet("index.cfm?action=departmentListAJAX");
			var employees   = new Spry.Data.JSONDataSet("index.cfm?action=getEmployeesForDepartmentAJAX&departmentID={departments::ID}");
		</script>
	</head>
	<body>
	<form action="index.cfm?action=doDepartmentChange" method="post">
		<div spry:region="departments">
		  <p>Department:</p>
		  <select spry:repeatChildren="departments" name="oldDpt" id="oldDpt" onchange="departments.setCurrentRow(this.selectedIndex);">
		  	<option value="{ID}">{NAME}</option>
		  </select>
		</div>
		
		<div spry:region="employees">
		  <p>Employees:</p>
		  <select spry:repeatChildren="employees" name="emp" id="emp">
		  	<option value="{ID}">{NAME}</option>
		  </select>
		</div>
		
		<div spry:region="departments">
		  <p>New Department:</p>
		  <select spry:repeatChildren="departments" name="newDpt" id="newDpt" >
		  	<option value="{ID}">{NAME}</option>
		  </select>
		</div>
		<input type="submit" value="Swap Departments"/>
	</form>
	<a href="index.cfm?action=showMenu">Show Menu</a>
	</body>
</html>